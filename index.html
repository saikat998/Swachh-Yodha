<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Swachh Yoddha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: "Noto Sans", sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(to bottom, #e8f5f8, #d1f2eb);
      display: flex;
      justify-content: center;
      align-items: flex-start;
      overflow: hidden;
    }
    .screen {
      display: none;
      width: 100%;
      max-width: 400px;
      background: #fff;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      text-align: center;
    }
    .active {
      display: block;
    }
    .logo {
      font-size: 60px;
      color: green;
      margin-bottom: 15px;
    }
    h1 {
      font-size: 22px;
      margin: 10px 0;
    }
    p {
      color: #555;
      margin: 5px 0 15px;
    }
    input, button, select {
      width: 90%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }
    button {
      background: green;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: darkgreen;
    }
    video, canvas, img {
      max-width: 100%;
      border-radius: 10px;
      margin-top: 10px;
    }
    .job-card {
      background: #f9f9f9;
      padding: 10px;
      margin: 10px 0;
      border-radius: 8px;
      text-align: left;
      cursor: pointer;
    }
    /* Splash screen styling */
    #splashScreen {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(to bottom, #e8f5f8, #d1f2eb);
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      z-index: 9999;
      text-align: center;
    }
    #splashScreen .logo {
      font-size: 80px;
    }
    #splashScreen h1 {
      font-size: 26px;
      margin-top: 15px;
      font-weight: bold;
    }
    /* DASHBOARD SPECIFIC STYLES */
    .dashboard-container {
      width: 100vw;
      max-width: 400px;
      margin: 0 auto;
      padding-bottom: 90px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: linear-gradient(to bottom, #e8f5f8, #d1f2eb);
      overflow: hidden;
    }
    .dashboard-header {
      margin-top: 32px;
      margin-bottom: 10px;
      text-align: center;
    }
    .dashboard-header h1 {
      font-size: 26px;
      font-weight: bold;
      margin: 0 0 6px 0;
      color: #219150;
      letter-spacing: 0.5px;
    }
    .dashboard-header p {
      color: #4caf50;
      margin: 0 0 18px 0;
      font-size: 15px;
    }
    .dashboard-feature-list {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 18px;
      margin-top: 10px;
    }
    .dashboard-feature-btn {
      background: #fff;
      border: none;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(44, 62, 80, 0.10);
      padding: 18px 0;
      font-size: 18px;
      font-weight: 600;
      color: #219150;
      margin: 0;
      width: 100%;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .dashboard-feature-btn:hover {
      background: #eafbe7;
      color: #176d3b;
    }
    /* BOTTOM NAVIGATION BAR */
    .bottom-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 70px;
      background: #fff;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.08);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
      border-radius: 30px 30px 0 0;
      width: 100vw;
      margin: 0 auto;
    }
    .bottom-nav.active {
      display: flex;
    }
    .bottom-nav button {
      background: none;
      border: none;
      outline: none;
      font-size: 28px;
      color: #bdbdbd;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 18px;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      transition: color 0.2s, background 0.2s;
    }
    .bottom-nav button.active, .bottom-nav button:focus {
      color: #219150;
      background: #eafbe7;
    }
    .bottom-nav-label {
      display: none;
    }
  </style>
</head>
<body>

  <!-- SPLASH SCREEN -->
  <div id="splashScreen">
    <div class="logo">‚ôªÔ∏è</div>
    <h1>Swachh Yoddha</h1>
    <p>Empowering Clean India</p>
  </div>

  <!-- LOGIN -->
  <div class="screen" id="loginScreen">
    <div class="logo">‚ôªÔ∏è</div>
    <h1>Swachh Yoddha</h1>
    <p>Welcome back, please enter your details</p>
    <input type="text" id="phone" placeholder="Enter Mobile Number">
    <button onclick="sendOTP()">Send OTP</button>
    <div id="otpSection" style="display:none;">
      <input type="text" id="otp" placeholder="Enter OTP">
      <button onclick="verifyOTP()">Verify OTP</button>
    </div>
  </div>

  <!-- TODAY'S JOBS -->
  <div class="screen" id="jobsScreen">
    <h1>Today's Jobs</h1>
    <div class="job-card" onclick="openJobDetails('Job 1')">
      <strong>Job 1</strong><br> Street Cleaning - Sector 5
    </div>
    <div class="job-card" onclick="openJobDetails('Job 2')">
      <strong>Job 2</strong><br> Garbage Pickup - Ward 12
    </div>
  </div>

  <!-- JOB DETAILS + QR -->
  <div class="screen" id="jobDetailsScreen">
    <h1 id="jobTitle">Job Details</h1>
    <p>Scan the QR Code at location</p>
    <button onclick="mockQRScan()">Scan QR</button>
    <p id="qrResult"></p>
    <button onclick="goToScreen('proofScreen')">Next</button>
  </div>

  <!-- PROOF OF EVIDENCE -->
  <div class="screen" id="proofScreen">
    <h1>Proof of Evidence</h1>
    <video id="camera" autoplay playsinline></video>
    <canvas id="snapshot" style="display:none;"></canvas>
    <button onclick="capturePhoto()">Capture Photo</button>
    <div id="photoPreview"></div>
    <button onclick="goToScreen('statusScreen')">Next</button>
  </div>

  <!-- UPDATE STATUS -->
  <div class="screen" id="statusScreen">
    <h1>Update Status</h1>
    <select id="status">
      <option value="completed">Completed</option>
      <option value="pending">Pending</option>
      <option value="failed">Failed</option>
    </select>
    <button onclick="finishJob()">Submit</button>
  </div>

  <!-- PROFILE SETUP -->
  <div class="screen" id="profileScreen">
    <h1>Profile Setup</h1>
    <input type="text" id="fullName" placeholder="Full Name">
    <input type="email" id="email" placeholder="Email Address">
    <input type="text" id="address" placeholder="Address">
    <select id="gender" style="width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ccc; border-radius: 8px; font-size: 16px;">
      <option value="">Select Gender</option>
      <option value="male">Male</option>
      <option value="female">Female</option>
    </select>
    <button onclick="saveProfile()">Save Profile</button>
  </div>

  <!-- PROFILE VIEW -->
  <div class="screen" id="profileViewScreen">
    <h1>Profile</h1>
    <div id="profileDetails" style="background:rgba(255,255,255,0.8); border-radius:16px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:18px 0; margin:18px 0;"></div>
    <button onclick="goToScreen('profileScreen')" style="width:100%; margin-bottom:12px;">Edit Profile</button>
    <button onclick="logout()" style="background: #e74c3c; width:100%;">Logout</button>
  </div>

  <!-- DASHBOARD -->
  <div class="screen" id="dashboardScreen">
    <div class="dashboard-container">
      <div class="dashboard-header">
        <h1 id="welcomeName">Welcome!</h1>
        <p>Let's make our city cleaner.</p>
      </div>
      <div class="dashboard-feature-list">
        <button class="dashboard-feature-btn" onclick="goToScreen('trainingScreen')">
          üé• Training Videos
        </button>
        <button class="dashboard-feature-btn" onclick="goToScreen('rewardsScreen')">
          üèÜ Rewards & Incentives
        </button>
      </div>
    </div>
  </div>

  <!-- TRAINING SCREEN -->
  <div class="screen" id="trainingScreen">
    <h1>Training Videos</h1>
    <p>Watch training videos to improve your skills.</p>
    <!-- Example video embed -->
    <iframe width="100%" height="200" src="https://www.youtube.com/embed/1Ne1hqOXKKI" title="Training Video" frameborder="0" allowfullscreen></iframe>
  </div>

  <!-- REWARDS & INCENTIVES SCREEN -->
  <div class="screen" id="rewardsScreen">
    <div class="dashboard-container">
      <div style="display: flex; justify-content: center; gap: 12px; margin-bottom: 18px;">
        <button id="incentiveTab" onclick="showIncentives()" style="flex:1; background:#eafbe7; color:#219150; border:none; border-radius:16px 0 0 16px; font-weight:600; font-size:16px; padding:10px 0;">Incentives</button>
        <button id="penaltyTab" onclick="showPenalties()" style="flex:1; background:#fff3e0; color:#e65100; border:none; border-radius:0 16px 16px 0; font-weight:600; font-size:16px; padding:10px 0;">Penalties</button>
      </div>
      <div id="incentivesSection">
        <div style="background:rgba(255,255,255,0.7); border-radius:18px; box-shadow:0 4px 24px rgba(44,62,80,0.10); padding:18px; margin-bottom:18px; display:flex; align-items:center; gap:16px;">
          <span style="font-size:32px; color:#219150;">üèÜ</span>
          <div>
            <div style="font-size:18px; font-weight:600; color:#219150;">Total Incentive Points</div>
            <div style="font-size:24px; font-weight:bold; color:#219150;">120</div>
            <div style="font-size:14px; color:#4caf50; margin-top:2px;">Level: <span style="font-weight:600;">Silver</span></div>
          </div>
        </div>
        <div style="margin-bottom:12px; font-weight:600; color:#219150;">Incentive History</div>
        <div style="display:flex; flex-direction:column; gap:12px;">
          <div style="background:rgba(255,255,255,0.8); border-radius:14px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:12px 14px; display:flex; align-items:center; gap:12px;">
            <span style="font-size:22px;">üìÖ</span>
            <div style="flex:1;">
              <div style="font-size:15px; font-weight:600;">12 Sep 2025 - Street Cleaning</div>
              <div style="font-size:13px; color:#219150;">+20 pts <span style="font-size:12px; color:#888;">(Supervisor: Good job!)</span></div>
            </div>
          </div>
          <div style="background:rgba(255,255,255,0.8); border-radius:14px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:12px 14px; display:flex; align-items:center; gap:12px;">
            <span style="font-size:22px;">üìÖ</span>
            <div style="flex:1;">
              <div style="font-size:15px; font-weight:600;">10 Sep 2025 - Garbage Pickup</div>
              <div style="font-size:13px; color:#219150;">+15 pts <span style="font-size:12px; color:#888;">(Supervisor: Punctual)</span></div>
            </div>
          </div>
        </div>
        <div style="margin:18px 0 0 0;">
          <button style="background:#219150; color:#fff; border:none; border-radius:12px; padding:12px 24px; font-size:16px; font-weight:600; box-shadow:0 2px 8px rgba(44,62,80,0.10);">Redeem Points</button>
        </div>
      </div>
      <div id="penaltiesSection" style="display:none;">
        <div style="background:rgba(255,87,34,0.12); border-radius:18px; box-shadow:0 4px 24px rgba(44,62,80,0.10); padding:18px; margin-bottom:18px; display:flex; align-items:center; gap:16px;">
          <span style="font-size:32px; color:#e65100;">üí∏</span>
          <div>
            <div style="font-size:18px; font-weight:600; color:#e65100;">Total Penalty Due</div>
            <div style="font-size:24px; font-weight:bold; color:#e65100;">‚Çπ100</div>
          </div>
        </div>
        <div style="margin-bottom:12px; font-weight:600; color:#e65100;">Penalty History</div>
        <div style="display:flex; flex-direction:column; gap:12px;">
          <div style="background:rgba(255,255,255,0.8); border-radius:14px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:12px 14px; display:flex; align-items:center; gap:12px;">
            <span style="font-size:22px;">üö´</span>
            <div style="flex:1;">
              <div style="font-size:15px; font-weight:600;">Late Reporting</div>
              <div style="font-size:13px; color:#e65100;">‚Çπ50 <span style="font-size:12px; color:#888;">(12 Sep 2025)</span></div>
            </div>
            <button style="background:#fff3e0; color:#e65100; border:none; border-radius:8px; padding:6px 14px; font-size:13px; font-weight:600; box-shadow:0 1px 4px rgba(44,62,80,0.06);">Resolve</button>
          </div>
          <div style="background:rgba(255,255,255,0.5); border-radius:14px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:12px 14px; display:flex; align-items:center; gap:12px; opacity:0.5;">
            <span style="font-size:22px;">üö´</span>
            <div style="flex:1;">
              <div style="font-size:15px; font-weight:600;">Task Incompletion</div>
              <div style="font-size:13px; color:#e65100;">‚Çπ50 <span style="font-size:12px; color:#888;">(10 Sep 2025)</span></div>
            </div>
            <span style="font-size:13px; color:#888; font-weight:600;">Settled</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- HELP SCREEN -->
  <div class="screen" id="helpScreen">
    <h1>Help</h1>
    <div style="background:rgba(255,255,255,0.8); border-radius:16px; box-shadow:0 2px 8px rgba(44,62,80,0.06); padding:18px 0; margin:18px 0;">
      <div style="font-size:18px; color:#219150; font-weight:600; margin-bottom:8px;">Contact Us</div>
      <div style="font-size:16px; color:#333; margin-bottom:6px;">üìß <a href="mailto:swachhyodha@gmail.com" style="color:#219150; text-decoration:none;">swachhyodha@gmail.com</a></div>
      <div style="font-size:16px; color:#333;">üìû <a href="tel:7029553373" style="color:#219150; text-decoration:none;">7029553373</a></div>
    </div>
  </div>

  <!-- BOTTOM NAVIGATION BAR -->
  <div class="bottom-nav" id="bottomNav">
    <button id="navHome" onclick="goToScreen('dashboardScreen'); setActiveNav('navHome')">
      <span>üè†</span>
    </button>
    <button id="navProfile" onclick="goToScreen('profileScreen'); setActiveNav('navProfile')">
      <span>üë§</span>
    </button>
    <button id="navHelp" onclick="goToScreen('helpScreen'); setActiveNav('navHelp')">
      <span>‚ùì</span>
    </button>
  </div>

  <script>
    let generatedOTP = "";

    // Show splash for 4 seconds
    window.onload = function() {
      setTimeout(() => {
        document.getElementById("splashScreen").style.display = "none";
        document.getElementById("loginScreen").classList.add("active");
      }, 4000);
    }

    // Camera Access - only when Proof of Evidence screen is shown
    function openCamera() {
      const video = document.getElementById("camera");
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
          .then(stream => { video.srcObject = stream; })
          .catch(err => console.log("Camera not available", err));
      }
    }

    function goToScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      // Show nav on all screens except splash, login, and profile setup
      const nav = document.getElementById('bottomNav');
      if (id !== 'splashScreen' && id !== 'loginScreen' && id !== 'profileScreen') {
        nav.classList.add('active');
      } else {
        nav.classList.remove('active');
      }
      if (id === 'proofScreen') {
        openCamera();
      }
    }

    function sendOTP() {
      generatedOTP = "1234";
      document.getElementById("otpSection").style.display = "block";
    }

    function verifyOTP() {
      let entered = document.getElementById("otp").value;
      if (entered === generatedOTP) {
        goToScreen('profileScreen');
      } else {
        alert("Invalid OTP");
      }
    }

    function saveProfile() {
      // Save profile data to localStorage (optional)
      const name = document.getElementById('fullName').value;
      const email = document.getElementById('email').value;
      const address = document.getElementById('address').value;
      const gender = document.getElementById('gender').value;
      localStorage.setItem('profileName', name);
      localStorage.setItem('profileEmail', email);
      localStorage.setItem('profileAddress', address);
      localStorage.setItem('profileGender', gender);
      goToScreen('dashboardScreen');
    }

    function logout() {
      // Optionally clear any stored data
      goToScreen('loginScreen');
    }

    function openJobDetails(job) {
      document.getElementById("jobTitle").innerText = job;
      goToScreen('jobDetailsScreen');
    }

    function mockQRScan() {
      document.getElementById("qrResult").innerText = "‚úÖ QR Verified";
    }

    function capturePhoto() {
      const canvas = document.getElementById("snapshot");
      const context = canvas.getContext("2d");
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      context.drawImage(video, 0, 0, canvas.width, canvas.height);
      const imgData = canvas.toDataURL("image/png");
      document.getElementById("photoPreview").innerHTML = `<img src="${imgData}" width="100%">`;
    }

    function finishJob() {
      let status = document.getElementById("status").value;
      alert("Job updated as: " + status);
      // Stop camera stream if active
      const video = document.getElementById("camera");
      if (video && video.srcObject) {
        const tracks = video.srcObject.getTracks();
        tracks.forEach(track => track.stop());
        video.srcObject = null;
      }
      goToScreen('jobsScreen');
    }

    function setActiveNav(id) {
      document.getElementById('navHome').classList.remove('active');
      document.getElementById('navProfile').classList.remove('active');
      document.getElementById('navHelp').classList.remove('active');
      document.getElementById(id).classList.add('active');
      // Show profile view when profile icon is clicked
      if (id === 'navProfile') {
        showProfileView();
      }
    }

    function showProfileView() {
      // Load profile data from localStorage (optional)
      const name = localStorage.getItem('profileName') || '';
      const email = localStorage.getItem('profileEmail') || '';
      const address = localStorage.getItem('profileAddress') || '';
      const gender = localStorage.getItem('profileGender') || '';
      document.getElementById('profileDetails').innerHTML =
        `<strong>Name:</strong> ${name}<br>` +
        `<strong>Email:</strong> ${email}<br>` +
        `<strong>Address:</strong> ${address}<br>` +
        `<strong>Gender:</strong> ${gender ? gender.charAt(0).toUpperCase() + gender.slice(1) : ''}`;
      goToScreen('profileViewScreen');
    }

    function showIncentives() {
      document.getElementById('incentivesSection').style.display = '';
      document.getElementById('penaltiesSection').style.display = 'none';
      document.getElementById('incentiveTab').style.background = '#eafbe7';
      document.getElementById('incentiveTab').style.color = '#219150';
      document.getElementById('penaltyTab').style.background = '#fff3e0';
      document.getElementById('penaltyTab').style.color = '#e65100';
    }
    function showPenalties() {
      document.getElementById('incentivesSection').style.display = 'none';
      document.getElementById('penaltiesSection').style.display = '';
      document.getElementById('incentiveTab').style.background = '#eafbe7';
      document.getElementById('incentiveTab').style.color = '#219150';
      document.getElementById('penaltyTab').style.background = '#fff3e0';
      document.getElementById('penaltyTab').style.color = '#e65100';
    }
    // Show incentives by default
    if (typeof showIncentives === 'function') showIncentives();

    function updateWelcomeName() {
      const name = localStorage.getItem('profileName') || '';
      document.getElementById('welcomeName').innerText = name ? `Welcome, ${name}!` : 'Welcome!';
    }
    // Call updateWelcomeName when showing dashboard
    const oldGoToScreen = goToScreen;
    goToScreen = function(id) {
      oldGoToScreen.call(this, id);
      if (id === 'dashboardScreen') updateWelcomeName();
      if (id === 'proofScreen') openCamera();
    }
  </script>

</body>
</html>
